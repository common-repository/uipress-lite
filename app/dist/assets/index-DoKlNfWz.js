import{o as s,g as o,E as f,F as y,D as M,t as n,b as $,w as I,c as q,f as S,q as g,B as G,C as K,v as Y,u as L,k as B,j as T,z as c,T as O,G as x,A as N,a5 as U,y as m,l as W}from"./index-eeS_Y43W.js";const H=n("div",{class:"uip-h-32 uip-background-muted uip-border-rounder"},null,-1),J=[H],P={__name:"index",props:{rows:{type:[Number]},columns:{type:[Number]}},setup(e){return(v,w)=>(s(!0),o(y,null,f(e.rows,b=>(s(),o("tr",{class:"animate-pulse",key:`loader-${b}`},[(s(!0),o(y,null,f(e.columns,p=>(s(),o("td",{class:M(["uip-padding-xs",p===2?"uip-w-500p":""])},J,2))),256))]))),128))}},Q={class:"uip-flex uip-flex-column uip-gap-m uip-w-100p"},X={class:"uip-flex uip-flex-row gauip-padding-xs uip-flex-center uip-w-100p"},Z={class:"uip-flex-grow"},ee={class:"uip-position-relative uip-w-100p",style:{"max-width":"400px"}},te=["placeholder"],ie={class:"uip-flex uip-gap-xs uip-flex-center"},ne={key:0,class:"uip-w-100p uip-border-collapse uip-text-m"},se={class:"uip-text-left"},oe={key:0,class:"uip-text-muted w-1 uip-padding-s uip-border-top uip-border-bottom uip-w-30"},ae={key:0},le={key:0},ue=["colspan"],de=n("div",{class:"uip-h-10"},null,-1),ce=[de],re={key:"emptydata"},pe=["colspan"],he={key:"emptyquery"},ge=["colspan"],me={key:2},fe=["colspan"],ye=n("div",{class:"uip-h-10"},null,-1),xe=[ye],be=["onContextmenu","onClick"],ke={key:0,class:"uip-padding-left-s uip-padding-right-s uip-padding-top-xs uip-padding-bottom-xs group-hover:bg-slate-50 transition-all uip-cursor-pointer uip-border-round-left uip-w-30"},ve=["checked","onChange"],we=["colspan"],Ce={key:0,class:"uip-padding-top-s uip-flex uip-flex-row uip-gap-m uip-flex-between uip-flex-center uip-padding-xs uip-w-100p"},$e={class:"uip-text-muted"},Se={class:"uip-flex uip-gap-s uip-flex-center"},Be={class:"uip-text-muted"},Te=["disabled"],Ne=["disabled"],Ae={__name:"index",props:{columns:{default:()=>[],type:Array},data:{default:()=>[],type:Array},rowRightClick:{type:Function},rowClick:{type:Function},pagination:{type:Object},fetching:{type:Boolean},defaultMode:{default:()=>"list",type:String},onlyMode:{type:String},hideSelect:{type:Boolean},hasBorders:{type:Boolean}},emits:["previous","next","search","selected","griddragenter","griddragover","griddragleave","griddrop"],setup(e,{expose:v,emit:w}){const{__:b}=wp.i18n,p=w,u=e,C=$(u.defaultMode),d=$([]);I(d,(i,t)=>{p("selected",i)},{deep:!0});const A=(i,t)=>{let l=u.hideSelect&&t===0?["uip-border-round-left"]:[];return t==u.columns.length-1&&l.push("uip-border-round-right"),u.hasBorders&&(l=["uip-border-bottom",""]),l.join(" ")},D=i=>{i.target.checked?u.data.forEach(l=>{d.value.push(l.id)}):d.value=[]},V=(i,t)=>{const l=d.value.findIndex(k=>k.id===t.id);i&&!d.value.includes(t.id)&&d.value.push(t.id),!i&&d.value.includes(t.id)&&d.value.splice(l,1)},E=i=>{let t=i/30;return t=t>.6?.6:t,`${t.toFixed(3)}s`},F=(i,t)=>{u.rowRightClick&&(i.preventDefault(),u.rowRightClick(i,t))},_=(i,t)=>{u.rowClick&&(i.preventDefault(),u.rowClick(i,t))},R=i=>{if(i.width)return`width:${i.width}`},j=q(()=>C.value);return v({returnMode:j}),(i,t)=>{const l=S("AppIcon"),k=S("EmptyTable");return s(),o("div",Q,[n("div",X,[n("div",Z,[n("div",ee,[g(l,{icon:"search",class:"uip-text-muted uip-position-absolute uip-text-l uip-top-50p uip-translateY--50p",style:{left:"8px"}}),G(n("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.pagination.search=a),onKeyup:t[1]||(t[1]=Y(a=>p("search"),["enter"])),type:"text",class:"uip-input",style:{background:"transparent","padding-left":"36px","padding-right":"36px",width:"100%",border:"none"},placeholder:L(b)("Search...","uipress-lite")},null,40,te),[[K,e.pagination.search]]),g(O,null,{default:B(()=>[e.pagination.search?(s(),T(l,{key:0,icon:"return",class:"uip-text-muted uip-position-absolute uip-text-l uip-top-50p uip-translateY--50p",style:{right:"8px"}})):c("",!0)]),_:1})])]),n("div",ie,[x(i.$slots,"right-actions")])]),C.value==="list"&&(!e.onlyMode||e.onlyMode==="list")?(s(),o("table",ne,[n("thead",null,[n("tr",se,[e.hideSelect?c("",!0):(s(),o("th",oe,[n("input",{type:"checkbox",class:"uip-checkbox",onClick:D})])),(s(!0),o(y,null,f(e.columns,(a,h)=>(s(),o("th",{key:a.key,class:"uip-text-muted uip-padding-s uip-border-top uip-border-bottom uip-text-weight-normal",style:N(R(a))},[x(i.$slots,"head-"+a.key,{column:a},()=>[W(m(a.label),1)])],4))),128))])]),e.fetching?(s(),o("tbody",ae,[e.hasBorders?c("",!0):(s(),o("tr",le,[n("td",{colspan:e.columns.length},ce,8,ue)])),g(P,{columns:e.columns.length,rows:10},null,8,["columns"])])):(s(),T(U,{key:1,tag:"tbody",name:"tableitem",css:!1},{default:B(()=>[!e.data.length&&!e.pagination.search.length&&!e.fetching?(s(),o("tr",re,[n("td",{colspan:e.columns.length},[x(i.$slots,"empty")],8,pe)])):c("",!0),!e.data.length&&e.pagination.search.length&&!e.fetching?(s(),o("tr",he,[n("td",{colspan:e.columns.length},[g(k,{title:"Nothing found",description:`Nothing found for search term: '${e.pagination.search}'`},null,8,["description"])],8,ge)])):c("",!0),e.hasBorders?c("",!0):(s(),o("tr",me,[n("td",{colspan:e.columns.length},xe,8,fe)])),(s(!0),o(y,null,f(e.data,(a,h)=>(s(),o("tr",{key:a.id?a.id:h,style:N(`transition-delay:${E(h)}`),onContextmenu:r=>F(r,h),onClick:r=>_(r,h),class:"uip-row-hover"},[e.hideSelect?c("",!0):(s(),o("td",ke,[n("input",{type:"checkbox",class:"uip-checkbox",checked:!!d.value.includes(a.id),onChange:r=>V(i.d,a)},null,40,ve)])),(s(!0),o(y,null,f(e.columns,(r,z)=>(s(),o("td",{class:M(["uip-padding-left-s uip-padding-right-s uip-padding-top-xs uip-padding-bottom-xs group-hover:bg-slate-50 transition-all uip-cursor-pointer",A(r,z)]),key:r.key},[x(i.$slots,"row-"+r.key,{row:a,index:h})],2))),128))],44,be))),128))]),_:3})),n("tfoot",null,[n("tr",null,[n("td",{colspan:e.columns.length+1},[e.pagination&&e.data.length&&e.pagination.pages>1?(s(),o("div",Ce,[n("span",$e,m(e.pagination.per_page)+" of "+m(e.pagination.total),1),n("div",Se,[n("span",Be,m(e.pagination.page)+" of "+m(e.pagination.pages),1),n("button",{disabled:e.pagination.page===1,onClick:t[2]||(t[2]=a=>p("previous")),class:"uip-button-default"},[g(l,{icon:"chevron_left"})],8,Te),n("button",{onClick:t[3]||(t[3]=a=>p("next")),disabled:e.pagination.page===e.pagination.pages,class:"uip-button-default"},[g(l,{icon:"chevron_right"})],8,Ne)])])):c("",!0)],8,we)])])])):c("",!0)])}}};export{Ae as _};
